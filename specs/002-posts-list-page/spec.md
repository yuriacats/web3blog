# 機能仕様: ブログ記事一覧ページ

**機能ブランチ**: `002-posts-list-page`
**作成日**: 2026-02-10
**ステータス**: ドラフト
**入力**: ユーザー説明: "Issue #16: リンク、タイトル、タグを含むブログ記事一覧を表示する posts/page.tsx を作成"

## ユーザーシナリオ & テスト *(必須)*

### ユーザーストーリー 1 - 最新のブログ記事を閲覧 (優先度: P1)

訪問者は利用可能なブログ記事の一覧を見て、興味のあるコンテンツを発見してナビゲートできるようにしたい。

**この優先度の理由**: これはブログの中核機能です - 閲覧可能な記事一覧がなければ、訪問者はコンテンツを発見できません。これは即座にユーザー価値を提供する最小限の実行可能な機能です。

**独立したテスト**: `/posts` にアクセスして、タイトル、リンク、タグを含む記事一覧が表示されることを確認することで、完全にテストできます。コンテンツの発見を可能にすることで即座に価値を提供します。

**受け入れシナリオ**:

1. **前提**: ブログに公開された記事がある、**条件**: 訪問者が `/posts` にナビゲートする、**結果**: クリック可能なリンク付きの記事タイトル一覧が表示される
2. **前提**: 記事に関連するタグがある、**条件**: 記事一覧が表示される、**結果**: 各記事に関連するタグが表示される
3. **前提**: 複数の記事が存在する、**条件**: 訪問者が一覧を表示する、**結果**: 記事は新しい順（降順）で表示される
4. **前提**: 訪問者が記事タイトルをクリックする、**条件**: リンクが辿られる、**結果**: 個別の記事ページ (`/posts/[slug]`) に遷移する

---

### ユーザーストーリー 2 - 空の状態を適切に処理 (優先度: P2)

記事が利用できない場合、訪問者は混乱する空のページではなく、明確なメッセージを見るべきです。

**この優先度の理由**: エッジケースの処理はユーザー体験を向上させますが、MVP には必須ではありません。ブログはほとんどのシナリオで少なくとも1つのテスト記事を持ちます。

**独立したテスト**: 空のデータベースで `/posts` を表示し、フレンドリーな「記事がありません」メッセージが表示されることを確認することでテストできます。

**受け入れシナリオ**:

1. **前提**: ブログ記事が存在しない、**条件**: 訪問者が `/posts` にナビゲートする、**結果**: 記事が利用できないことを示すメッセージが表示される
2. **前提**: すべての記事が下書き（非公開）、**条件**: 訪問者が `/posts` を表示する、**結果**: 公開記事のみが表示される（公開記事がない場合は空の状態）

---

### エッジケース

- タグが割り当てられていない記事の場合、何が起こるか？
- 非常に長いタイトル（256文字以上）を持つ記事をシステムはどのように処理するか？
- 記事一覧の取得中にデータベース接続が失敗した場合、何が起こるか？
- 下書き記事（post_revision で public=0）は公開一覧からどのように除外されるか？

## 要件 *(必須)*

### 機能要件

- **FR-001**: システムは `/posts` ルートにすべての公開ブログ記事の一覧を表示しなければならない
- **FR-002**: システムは一覧の各エントリに記事タイトルを表示しなければならない
- **FR-003**: システムは各記事の詳細ページ (`/posts/[slug]`) へのクリック可能なリンクを提供しなければならない
- **FR-004**: システムは各記事に関連するすべてのタグを表示しなければならない
- **FR-005**: システムは記事を作成日順に並べ、最新の記事を最初に表示しなければならない
- **FR-006**: システムは公開としてマークされた記事のみを表示しなければならない（下書きを除外）
- **FR-007**: システムは記事が利用できない場合に適切なメッセージを表示しなければならない
- **FR-008**: システムは既存のデータベーススキーマ（post, post_revision, tag_name, tag_post テーブル）から記事を取得しなければならない
- **FR-009**: システムはタグのない記事を適切に処理しなければならない（タグリストなしで記事を表示）

### 主要なエンティティ *(機能がデータを含む場合に含める)*

- **Post**: タイトル、スラッグ（一意の識別子）、作成日、公開ステータスを持つブログ記事を表す
- **Tag**: 記事に関連付けられたカテゴリーラベルで、コンテンツの整理を可能にする
- **Post Revision**: タイトル、コンテンツ、公開/下書きステータスを含む、記事のバージョン管理されたコンテンツ
- **Post-Tag Relationship**: 記事とタグの多対多の関連

## 成功基準 *(必須)*

### 測定可能な成果

- **SC-001**: 訪問者はページ読み込みから2秒以内に記事一覧ページを表示し、すべての公開記事を見ることができる
- **SC-002**: クリック可能な記事リンクの100%が正しい個別記事ページにナビゲートする
- **SC-003**: 各記事に関連するすべてのタグが一覧ビューで表示される
- **SC-004**: 記事はすべてのページビューで一貫して作成日順（新しい順）に並べられる
- **SC-005**: ページは記事がない場合（空の状態）または100以上の記事がある場合（パフォーマンスが維持される）でも適切に表示される
- **SC-006**: 公開下書き記事が誤って一覧に表示されることはゼロ件

## スコープ

### スコープ内

- タイトル、リンク、タグを含む基本的なブログ記事一覧の表示
- 既存のデータベーススキーマからのデータ取得
- 作成日順（新しい順）での記事の並べ替え
- 下書き/未公開記事のフィルタリング
- 空の状態の処理（記事が利用できない場合）
- 既存のアプリケーションデザインと一貫した基本的なスタイリング

### スコープ外

- ページネーションまたは無限スクロール（Issue #32 でカバー）
- 検索機能（Issue #17 でカバー）
- タグフィルタリングまたはタグベースのナビゲーション（Issue #17 でカバー）
- ソートオプション（例：人気順、アルファベット順）
- 記事のプレビューまたは抜粋（Issue #16 では要求されていない）
- 著者情報の表示（要件で言及されていない）
- 記事の日付表示（要件で言及されていない）

## 前提条件

- 既存のデータベーススキーマ（post, post_revision, tag_name, tag_post）が正しく、必要なデータが含まれている
- テスト用に少なくとも1つの公開記事が存在する（`db/10_testData.sql` から）
- 個別の記事詳細ページ (`/posts/[slug]`) が既に存在するか、並行して実装されている（Issue #15）
- タグは記事にとってオプションである（記事はタグなしで存在できる）
- 「公開」記事は `post_revision.public = 1` で決定される
- 記事の最新の post_revision がその現在の状態を決定する
- 初期実装ではページネーションなしでパフォーマンスが許容可能である（ページネーションは別の Issue #32）

## 依存関係 & 制約

### 依存関係

- 既存のデータベーススキーマが利用可能で、データが投入されている必要がある
- バックエンドから MySQL へのデータベース接続が機能している必要がある
- フロントエンドとバックエンド間の通信のために tRPC インフラストラクチャがセットアップされている必要がある（コードベースに既に存在）

### 制約

- 既存のモノレポ構造を使用する必要がある（フロントエンドは `front/`、バックエンドは `backend/`）
- 型安全な API 呼び出しのために既存の tRPC セットアップを使用する必要がある
- Next.js 15 App Router の規約に従う必要がある（既に使用中）
- 既存のデザインシステムと統合する必要がある（最小限のスタイリングの一貫性が必要）
- データベーススキーマを変更してはならない（既存のテーブルで動作）

## 未解決の質問

*現時点ではなし。すべての要件は Issue #16 の説明と既存のコードベース構造に基づいて十分に定義されています。*
